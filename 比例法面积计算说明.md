# 比例法面积计算说明

## 问题背景
- 原始方法使用像素数 × (像素分辨率)² 计算面积
- 当去年和今年图像分辨率不同时，需要校正系数
- 校正系数不够灵活，且不能解决根本问题

## 版本7的创新方法
核心思想：**使用实际地理范围而非像素分辨率**

### 计算步骤：
1. **获取实际地理范围**
   ```python
   # 从今年图像的地理坐标计算实际范围
   实际宽度_米 = abs(src.bounds.right - src.bounds.left)
   实际高度_米 = abs(src.bounds.top - src.bounds.bottom)
   实际面积_平方米 = 实际宽度_米 * 实际高度_米
   ```

2. **计算耕地比例**
   ```python
   # 去年
   去年_耕地像素 = np.sum(裁剪区域 > 0.5)
   去年_总像素 = 裁剪区域.size
   去年_耕地比例 = 去年_耕地像素 / 去年_总像素

   # 今年
   今年_耕地像素 = np.sum(耕地掩码 > 0.5)
   今年_总像素 = 耕地掩码.size
   今年_耕地比例 = 今年_耕地像素 / 今年_总像素
   ```

3. **计算耕地面积**
   ```python
   # 去年面积 = 实际面积 × 去年耕地比例
   去年耕地面积_亩 = (实际面积_平方米 * 去年_耕地比例) / 666.67

   # 今年面积 = 实际面积 × 今年耕地比例
   今年耕地面积_亩 = (实际面积_平方米 * 今年_耕地比例) / 666.67
   ```

## 优势
1. **无需校正系数**：从根本上消除了分辨率差异的影响
2. **更准确**：基于实际的地理坐标，不受图像变形影响
3. **通用性强**：适用于任何分辨率的图像对比

## 实施情况
已将版本7的计算方法集成到 `耕地分析工具_图形界面.py`：
- 删除了校正系数（0.92）
- 添加了实际地理范围计算
- 使用比例法重新计算去年和今年的耕地面积

## 预期效果
- 无需任何校正系数即可得到准确的结果（约12.6亩）
- 去年和今年的计算基于相同的地理基准，更具可比性
- 消除了因分辨率差异导致的系统误差